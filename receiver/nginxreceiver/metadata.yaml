type: nginx
scope_name: otelcol/nginxreceiver

status:
  class: receiver
  stability:
    beta: [metrics]
  distributions: [contrib]
  codeowners:
    active: [djaglowski]

attributes:
  state:
    description: The state of a connection
    type: string
    enum:
    - active
    - reading
    - writing
    - waiting
  responses:
    description: The total number of different response types
    type: string
    enum:
    - failed
    - buffered
  status_code:
    description: A status code range
    type: string
    enum:
    - 1xx
    - 2xx
    - 3xx
    - 4xx
    - 5xx

metrics:
  nginx.requests:
    enabled: true
    description: Total number of requests made to the server since it started
    unit: requests
    sum:
      value_type: int
      monotonic: true
      aggregation_temporality: cumulative
    attributes: []
  nginx.connections_accepted:
    enabled: true
    description: The total number of accepted client connections
    unit: connections
    sum:
      value_type: int
      monotonic: true
      aggregation_temporality: cumulative
    attributes: []
  nginx.connections_handled:
    enabled: true
    description: The total number of handled connections. Generally, the parameter value is the same as nginx.connections_accepted unless some resource limits have been reached (for example, the worker_connections limit).
    unit: connections
    sum:
      value_type: int
      monotonic: true
      aggregation_temporality: cumulative
    attributes: []
  nginx.connections_current:
    enabled: true
    description: The current number of nginx connections by state
    unit: connections
    sum:
      value_type: int
      monotonic: false
      aggregation_temporality: cumulative
    attributes: [state]
  nginx.http.status:
    enabled: true
    description: The count of HTTP responses by response status
    unit: statuses
    sum:
      value_type: int
      monotonic: true
      aggregation_temporality: delta
    attributes: [status_code]
  nginx.upstreams_response:
    enabled: true
    description: The total number of HTTP requests from upstream responses
    unit: upstreams
    sum:
      value_type: int
      monotonic: true
      aggregation_temporality: delta
    attributes: [responses]
